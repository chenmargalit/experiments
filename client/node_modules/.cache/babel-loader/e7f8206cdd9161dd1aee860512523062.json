{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chenmargalit/Desktop/weightWpa/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chenmargalit/Desktop/weightWpa/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chenmargalit/Desktop/weightWpa/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{getData}from'../actions/index';import{useSelector,useDispatch}from'react-redux';import{Table,Spin,Alert}from'antd';import'./comp.css';import axios from'axios';var Home=function Home(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emoji=_useState4[0],setEmoji=_useState4[1];// const [errors, setErrors] = useState(false);\nvar st=useSelector(function(state){return state.data;});var errorsFromRedux=useSelector(function(state){return state.errors.error;});var userEmailFromRedux=useSelector(function(state){return state.users.email;});var dispatch=useDispatch();useEffect(function(){setLoading(true);function asyncFunc(){return _asyncFunc.apply(this,arguments);}function _asyncFunc(){_asyncFunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(getData());case 2:setLoading(false);case 3:case\"end\":return _context.stop();}}},_callee);}));return _asyncFunc.apply(this,arguments);}asyncFunc();},[dispatch]);var showEmo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// const rank = st.data.length || 1;\n// const res = await axios.get(\n//   `https://mgywp5jk64.execute-api.us-east-1.amazonaws.com/prod/rank?rank=${rank}`\n// );\n// console.log('res is', res);\n// setEmoji(res.data.input);\nst.data.map(function(data){return data.gap_from_yesterday<0?data.feeling='😁':data.feeling='😢';});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function showEmo(){return _ref.apply(this,arguments);};}();st.data&&st.data.length>0&&showEmo()&&console.log(st.data);var showError=function showError(){return/*#__PURE__*/React.createElement(Alert,{message:\"an Issue has occurred\",description:errorsFromRedux,type:\"error\"});};var columns=[{title:'Date',dataIndex:'fullDate',key:'fullDate'},{title:'Day of week',dataIndex:'day',key:'day'},{title:'Weight',dataIndex:'weight',key:'weight'},{title:'Gap from yesterday',dataIndex:'gap_from_yesterday',key:'yesterday_gap'},{title:'Exercise',dataIndex:'exercise',key:'exercise'},{title:'Gap_from_beginning',dataIndex:'gap_from_beginning',key:'beginning_gap'},{title:'comment',dataIndex:'comment',key:'comment'},{title:'feeling',dataIndex:'feeling',key:'feeling'}];return/*#__PURE__*/React.createElement(\"div\",{style:{margin:30}},/*#__PURE__*/React.createElement(\"h1\",null,\"Home \",emoji),loading?/*#__PURE__*/React.createElement(Spin,{size:\"large\",className:\"spinner\"}):errorsFromRedux?/*#__PURE__*/React.createElement(\"h1\",null,showError()):/*#__PURE__*/React.createElement(\"div\",null,st.data&&st.data.length>0&&/*#__PURE__*/React.createElement(Table,{rowClassName:function rowClassName(record,index){return record.gap_from_yesterday<0?'lost':'gained';},bordered:true,scroll:true,pagination:false,rowKey:function rowKey(record){return Math.random();},columns:columns,dataSource:st.data})));};export default Home;","map":{"version":3,"sources":["/Users/chenmargalit/Desktop/weightWpa/client/src/components/Home.js"],"names":["React","useEffect","useState","getData","useSelector","useDispatch","Table","Spin","Alert","axios","Home","loading","setLoading","emoji","setEmoji","st","state","data","errorsFromRedux","errors","error","userEmailFromRedux","users","email","dispatch","asyncFunc","showEmo","map","gap_from_yesterday","feeling","length","console","log","showError","columns","title","dataIndex","key","margin","record","index","Math","random"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getData } from '../actions/index';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Table, Spin, Alert } from 'antd';\nimport './comp.css';\nimport axios from 'axios';\n\nconst Home = () => {\n  const [loading, setLoading] = useState(false);\n  const [emoji, setEmoji] = useState('');\n  // const [errors, setErrors] = useState(false);\n  const st = useSelector((state) => state.data);\n  const errorsFromRedux = useSelector((state) => state.errors.error);\n  const userEmailFromRedux = useSelector((state) => state.users.email);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setLoading(true);\n    async function asyncFunc() {\n      // await dispatch(getData(userEmailFromRedux));\n      await dispatch(getData());\n\n      setLoading(false);\n    }\n    asyncFunc();\n  }, [dispatch]);\n\n  const showEmo = async () => {\n    // const rank = st.data.length || 1;\n    // const res = await axios.get(\n    //   `https://mgywp5jk64.execute-api.us-east-1.amazonaws.com/prod/rank?rank=${rank}`\n    // );\n    // console.log('res is', res);\n    // setEmoji(res.data.input);\n    st.data.map((data) => {\n      return data.gap_from_yesterday < 0 ? (data.feeling = '😁') : (data.feeling = '😢');\n    });\n  };\n  st.data && st.data.length > 0 && showEmo() && console.log(st.data);\n\n  const showError = () => {\n    return <Alert message='an Issue has occurred' description={errorsFromRedux} type='error' />;\n  };\n\n  const columns = [\n    {\n      title: 'Date',\n      dataIndex: 'fullDate',\n      key: 'fullDate',\n    },\n    {\n      title: 'Day of week',\n      dataIndex: 'day',\n      key: 'day',\n    },\n    {\n      title: 'Weight',\n      dataIndex: 'weight',\n      key: 'weight',\n    },\n    {\n      title: 'Gap from yesterday',\n      dataIndex: 'gap_from_yesterday',\n      key: 'yesterday_gap',\n    },\n    {\n      title: 'Exercise',\n      dataIndex: 'exercise',\n      key: 'exercise',\n    },\n    {\n      title: 'Gap_from_beginning',\n      dataIndex: 'gap_from_beginning',\n      key: 'beginning_gap',\n    },\n    {\n      title: 'comment',\n      dataIndex: 'comment',\n      key: 'comment',\n    },\n    {\n      title: 'feeling',\n      dataIndex: 'feeling',\n      key: 'feeling',\n    },\n  ];\n\n  return (\n    <div style={{ margin: 30 }}>\n      <h1>Home {emoji}</h1>\n      {loading ? (\n        <Spin size='large' className='spinner' />\n      ) : errorsFromRedux ? (\n        <h1>{showError()}</h1>\n      ) : (\n        <div>\n          {st.data && st.data.length > 0 && (\n            <Table\n              rowClassName={(record, index) => (record.gap_from_yesterday < 0 ? 'lost' : 'gained')}\n              bordered\n              scroll\n              pagination={false}\n              rowKey={(record) => Math.random()}\n              columns={columns}\n              dataSource={st.data}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}